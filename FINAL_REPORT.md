# ‚úÖ SalesBot MVP - –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢

## üéâ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢!

### ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:

#### 1. **–î–æ—Å—Ç—É–ø –∫ AmoCRM API** ‚úÖ
```
‚úÖ Account     - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ
‚úÖ Users (10)  - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚úÖ Leads       - —Å–¥–µ–ª–∫–∏  
‚úÖ Contacts    - –∫–æ–Ω—Ç–∞–∫—Ç—ã
‚úÖ Tasks       - –∑–∞–¥–∞—á–∏
‚úÖ Notes       - –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
‚úÖ Events      - —Å–æ–±—ã—Ç–∏—è (–≤–∫–ª—é—á–∞—è –∑–≤–æ–Ω–∫–∏!)
```

#### 2. **–î–æ—Å—Ç—É–ø –∫ –∑–≤–æ–Ω–∫–∞–º** ‚úÖ
- **–ú–µ—Ç–æ–¥:** Events API (–Ω–µ –ø—Ä—è–º–æ–π GET /calls)
- **–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
  - `outgoing_call` - –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏ (–Ω–∞–π–¥–µ–Ω–æ 10)
  - `incoming_call` - –≤—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏
  - `talk_missed_event` - –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ (–Ω–∞–π–¥–µ–Ω–æ 1)

#### 3. **–î–µ—Ç–∞–ª–∏ –∑–≤–æ–Ω–∫–∞** ‚úÖ

–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –∏–∑ –≤–∞—à–µ–≥–æ AmoCRM:

```json
{
  "id": 71101969,
  "note_type": "call_out",
  "params": {
    "duration": 173,
    "source": "MangoOfficeWidget",
    "link": "https://amocrm.mango-office.ru/calls/recording/download/...",
    "phone": "+79824134344",
    "call_result": "–∏—Å—Ö–æ–¥—è—â–∏–π",
    "call_status": 4
  }
}
```

**–ï—Å—Ç—å –≤—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ:**
- ‚úÖ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞ (173 —Å–µ–∫)
- ‚úÖ –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ **–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–∞!** üéôÔ∏è
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–∞

---

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Webhook (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. AmoCRM –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞: `https://app.justbusiness.lol/webhook/amocrm/call`

2. SalesBot –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∞

3. –°–∫–∞—á–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ `params.link`

4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Events API (polling)

1. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å Events API

2. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —Ç–∏–ø–∞ `outgoing_call`, `incoming_call`

3. –ü–æ–ª—É—á–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ notes

4. –°–∫–∞—á–∏–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏

---

## üìä –¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∞ (scopes):

```
‚úÖ push_notifications - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚úÖ files              - —Ñ–∞–π–ª—ã  
‚úÖ crm                - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ CRM (–≤–∫–ª—é—á–∞–µ—Ç –∑–≤–æ–Ω–∫–∏!)
‚úÖ notifications      - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

**Scope "crm" –≤–∫–ª—é—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∑–≤–æ–Ω–∫–∞–º —á–µ—Ä–µ–∑ Events API!**

–û—Ç–¥–µ–ª—å–Ω—ã–π scope "calls" –ù–ï –Ω—É–∂–µ–Ω –≤ AmoCRM API v4.

---

## üéØ –í—ã–≤–æ–¥:

### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ü–†–ê–í–ò–õ–¨–ù–û!

- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –µ—Å—Ç—å
- –î–æ—Å—Ç—É–ø –∫ –∑–≤–æ–Ω–∫–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Events API
- –°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–ø–∏—Å–∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã
- Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ

### üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

1. **–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ AmoCRM:**
   - URL: `https://app.justbusiness.lol/webhook/amocrm/call`
   - –°–æ–±—ã—Ç–∏—è: "–ó–≤–æ–Ω–æ–∫ —Å–æ–∑–¥–∞–Ω", "–ó–≤–æ–Ω–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω"

2. **–°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫:**
   - –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ AmoCRM
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–≤–æ–Ω–æ–∫ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è (Mango Office)
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç webhook
   - –°–∫–∞—á–∞–µ—Ç –∑–∞–ø–∏—Å—å
   - –†–∞—Å—à–∏—Ñ—Ä—É–µ—Ç —á–µ—Ä–µ–∑ Whisper
   - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ GPT
   - –û—Ç–ø—Ä–∞–≤–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
journalctl -u salesbot-api -f

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
ls -lh /root/salesbot-mvp/salesbot.db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∞—É–¥–∏–æ
ls -lh /tmp/salesbot/audio/
```

---

## üöÄ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!

**–î–∞—Ç–∞:** 24.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready  
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è  
**API:** ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É! üìû
