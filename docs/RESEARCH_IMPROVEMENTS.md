# –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: –£–ª—É—á—à–µ–Ω–∏–µ SalesBot –¥–ª—è —Ä–æ—Å—Ç–∞ –ø—Ä–æ–¥–∞–∂ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π

## –¢–µ–∫—É—â–∏–π –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–ß—Ç–æ —É–∂–µ –µ—Å—Ç—å)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **–ê–Ω–∞–ª–∏–∑ –∑–≤–æ–Ω–∫–æ–≤ —Å AI**
   - –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∑–≤–æ–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ Whisper
   - GPT-–∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
   - –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞
   - –í—ã—è–≤–ª–µ–Ω–∏–µ —Å–ª–∞–±—ã—Ö –º–µ—Å—Ç –≤ –¥–∏–∞–ª–æ–≥–µ

2. **–ö–æ—É—á–∏–Ω–≥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤**
   - –ê–Ω–∞–ª–∏–∑ —Å–¥–µ–ª–æ–∫ –∫–∞–∫ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂
   - AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–µ
   - Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AmoCRM**
   - OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –∏ –∑–≤–æ–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ API v4
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –∫ —Å–¥–µ–ª–∫–∞–º
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

4. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - Async task queue
   - Rate limiting –¥–ª—è API
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - Webhooks –æ—Ç AmoCRM

---

## üöÄ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –£–ª—É—á—à–µ–Ω–∏—é

### –ö–ê–¢–ï–ì–û–†–ò–Ø 1: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ö–æ–Ω–≤–µ—Ä—Å–∏–π

#### 1.1 –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –û—Ü–µ–Ω–∫–∞ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ó–∞–∫—Ä—ã—Ç–∏—è

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- ML-–º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∏
- –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö: –∫–∞–∫–∏–µ —Å–¥–µ–ª–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å, –∫–∞–∫–∏–µ –Ω–µ—Ç
- –§–∞–∫—Ç–æ—Ä—ã: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤, –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏, —ç—Ç–∞–ø—ã –≤–æ—Ä–æ–Ω–∫–∏, –¥–ª–∏–Ω–∞ —Ü–∏–∫–ª–∞

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ù–æ–≤—ã–π –º–æ–¥—É–ª—å: app/analysis/ml_predictor.py

class DealConversionPredictor:
    """–ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ ML"""

    async def train_model(self, historical_deals: List[Deal]):
        """–û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
        features = self._extract_features(historical_deals)
        # scikit-learn RandomForest –∏–ª–∏ XGBoost

    def _extract_features(self, deal):
        return {
            'deal_age_days': ...,
            'calls_count': ...,
            'avg_response_time_hours': ...,
            'stage_changes_count': ...,
            'budget_range': ...,
            'manager_performance': ...,
            'time_in_current_stage': ...,
            'last_activity_days': ...,
        }

    async def predict_conversion(self, deal_id: int) -> float:
        """–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç 0 –¥–æ 1"""
        # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0.73 = 73% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –±–∏–∑–Ω–µ—Å–∞:**
- –§–æ–∫—É—Å –Ω–∞ —Å–¥–µ–ª–∫–∞—Ö —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
- –°–ø–∞—Å–µ–Ω–∏–µ "—É–º–∏—Ä–∞—é—â–∏—Ö" —Å–¥–µ–ª–æ–∫ —Å –Ω–∏–∑–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** 3-5 –¥–Ω–µ–π
**ROI:** –í—ã—Å–æ–∫–∏–π - –¥–æ 20% —Ä–æ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

---

#### 1.2 –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –í—Ä–µ–º—è –ö–æ–Ω—Ç–∞–∫—Ç–∞ (Best Time to Call)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤: –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –±—Ä–∞–ª —Ç—Ä—É–±–∫—É, –∫–æ–≥–¥–∞ –±—ã–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–≤–ª–µ—á–µ–Ω
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–≤–æ–Ω–∫–∞ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –ª—É—á—à–µ–µ –≤—Ä–µ–º—è

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ú–æ–¥—É–ª—å: app/analysis/timing_optimizer.py

class ContactTimingOptimizer:
    """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º"""

    async def analyze_client_patterns(self, client_id: int):
        """–ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞"""
        calls = await self._get_client_calls(client_id)

        return {
            'best_day_of_week': 'Tuesday',  # –í—Ç–æ—Ä–Ω–∏–∫
            'best_time_range': '10:00-12:00',  # –£—Ç—Ä–æ
            'worst_time': '16:00-18:00',  # –ü–æ—Å–ª–µ–æ–±–µ–¥ –∏–∑–±–µ–≥–∞—Ç—å
            'avg_call_duration_by_time': {...},
            'answer_rate_by_time': {...},
            'engagement_score_by_time': {...}  # AI –æ—Ü–µ–Ω–∫–∞ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏
        }

    async def suggest_next_call_time(self, deal_id: int) -> datetime:
        """–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞"""
        # –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞ + —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AmoCRM:**
- –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- –¢–µ–≥ –Ω–∞ —Å–¥–µ–ª–∫–µ "–õ—É—á—à–µ–µ –≤—Ä–µ–º—è: –í—Ç 10-12"

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- +30% answer rate
- –ë–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –≤ —É–¥–æ–±–Ω–æ–µ –∫–ª–∏–µ–Ω—Ç—É –≤—Ä–µ–º—è

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è

---

#### 1.3 –£–º–Ω—ã–µ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –†–µ–∞–Ω–∏–º–∞—Ü–∏–∏ –•–æ–ª–æ–¥–Ω—ã—Ö –°–¥–µ–ª–æ–∫

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "—Å–ø—è—â–∏—Ö" —Å–¥–µ–ª–æ–∫ —Å –≤—ã—Å–æ–∫–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º
- AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
- –ú—É–ª—å—Ç–∏–∫–∞–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥: email + WhatsApp + –∑–≤–æ–Ω–æ–∫

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ú–æ–¥—É–ª—å: app/tasks/deal_reactivation.py

class DealReactivator:
    """–†–µ–∞–Ω–∏–º–∏—Ä—É–µ—Ç –∑–∞—Å—Ç–æ—è–≤—à–∏–µ—Å—è —Å–¥–µ–ª–∫–∏"""

    async def find_reactivation_candidates(self):
        """–ù–∞–π—Ç–∏ —Å–¥–µ–ª–∫–∏ –¥–ª—è —Ä–µ–∞–Ω–∏–º–∞—Ü–∏–∏"""
        criteria = {
            'no_activity_days': 7,
            'budget': '>= 100000',  # –¢–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω—ã–µ
            'previous_engagement': 'high',  # –ë—ã–ª –∏–Ω—Ç–µ—Ä–µ—Å
            'stage': 'not_lost'  # –ï—â–µ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–∞
        }

    async def generate_reactivation_message(self, deal_id: int) -> Dict:
        """AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"""
        context = await self._get_deal_context(deal_id)

        # GPT-4 –ø—Ä–æ–º–ø—Ç
        prompt = f"""
        –ö–ª–∏–µ–Ω—Ç: {context['client_name']}
        –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–Ω—Ç–∞–∫—Ç: {context['last_contact_date']}
        –ü—Ä–∏—á–∏–Ω–∞ –ø–∞—É–∑—ã: {context['reason_for_pause']}
        –ò–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª—Å—è: {context['product']}

        –°–æ–∑–¥–∞–π SHORT (3-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è) –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è WhatsApp,
        —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–π —Ç—Ä–∏–≥–≥–µ—Ä—ã:
        - –ù–æ–≤–æ—Å—Ç—å/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
        - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
        - –†–µ—à–µ–Ω–∏–µ –æ–∑–≤—É—á–µ–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã

        –°—Ç–∏–ª—å: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤—ã–π
        """

        return {
            'whatsapp_text': "...",
            'email_subject': "...",
            'email_body': "...",
            'call_script': "..."
        }

    async def execute_reactivation_sequence(self, deal_id: int):
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–Ω–∏–º–∞—Ü–∏–∏"""
        # –î–µ–Ω—å 1: WhatsApp
        # –î–µ–Ω—å 2: Email –µ—Å–ª–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞
        # –î–µ–Ω—å 4: –ó–≤–æ–Ω–æ–∫ –µ—Å–ª–∏ –Ω–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ AmoCRM Digital Pipeline
- –û—Ç–º–µ—Ç–∫–∏ –≤ —Å–¥–µ–ª–∫–µ –æ –ø–æ–ø—ã—Ç–∫–∞—Ö —Ä–µ–∞–Ω–∏–º–∞—Ü–∏–∏

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –í–æ–∑–≤—Ä–∞—Ç 15-25% "–º–µ—Ä—Ç–≤—ã—Ö" —Å–¥–µ–ª–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 4-6 –¥–Ω–µ–π

---

#### 1.4 –ê–Ω–∞–ª–∏–∑ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –≤ –†–∞–∑–≥–æ–≤–æ—Ä–∞—Ö

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- NLP –∞–Ω–∞–ª–∏–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –≤ –∑–≤–æ–Ω–∫–∞—Ö
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–π —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏
- –ë–∞–∑–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–∏–ø–∏—á–Ω—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ú–æ–¥—É–ª—å: app/analysis/competitor_tracker.py

class CompetitorAnalyzer:
    """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤"""

    COMPETITORS = ['–ö–æ–º–ø–∞–Ω–∏—è –ê', '–ö–æ–º–ø–∞–Ω–∏—è –ë', ...]

    async def detect_competitors_in_call(self, transcription: str):
        """–û–±–Ω–∞—Ä—É–∂–∏—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤"""
        mentions = []
        for competitor in self.COMPETITORS:
            if competitor.lower() in transcription.lower():
                context = self._extract_context(transcription, competitor)
                mentions.append({
                    'competitor': competitor,
                    'context': context,
                    'sentiment': self._analyze_sentiment(context)
                })

        return mentions

    async def suggest_counter_arguments(self, competitor: str, objection: str):
        """–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç—ã"""
        # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π + AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
        return {
            'key_differentiators': [...],
            'suggested_response': "...",
            'case_studies': [...]
        }
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- Telegram alert –º–µ–Ω–µ–¥–∂–µ—Ä—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–≤–æ–Ω–∫–∞: "–ö–ª–∏–µ–Ω—Ç —É–ø–æ–º—è–Ω—É–ª –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞ X, –≤–æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã"
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∫–∞–∫–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã —á–∞—â–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è
- –¢—Ä–µ–Ω–∏–Ω–≥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–æ —Å–ª–∞–±—ã–º –º–µ—Å—Ç–∞–º

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –õ—É—á—à–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è–º
- –í—ã–∏–≥—Ä—ã—à –≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Å–¥–µ–ª–∫–∞—Ö

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 3-4 –¥–Ω—è

---

### –ö–ê–¢–ï–ì–û–†–ò–Ø 2: –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –†–∞–±–æ—Ç—ã –ú–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

#### 2.1 –î–∞—à–±–æ—Ä–¥ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –†–µ–∞–ª—å–Ω–æ–º –í—Ä–µ–º–µ–Ω–∏

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- Real-time –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ KPI –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –†–µ–π—Ç–∏–Ω–≥–∏, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, —Ç—Ä–µ–Ω–¥—ã

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
```python
# –ú–æ–¥—É–ª—å: app/analytics/manager_dashboard.py

class ManagerDashboard:
    """–î–∞—à–±–æ—Ä–¥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤"""

    async def get_manager_kpi(self, manager_id: int, period: str):
        return {
            # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
            'calls_made': 45,
            'calls_answered': 32,
            'avg_call_duration': '12:34',
            'response_time_avg_hours': 2.5,

            # –ö–æ–Ω–≤–µ—Ä—Å–∏–∏
            'deals_created': 12,
            'deals_won': 5,
            'deals_lost': 2,
            'conversion_rate': 0.42,  # 42%

            # –ö–∞—á–µ—Å—Ç–≤–æ
            'avg_call_quality_score': 8.2,  # AI –æ—Ü–µ–Ω–∫–∞ –∏–∑ 10
            'client_satisfaction': 4.5,  # –ò–∑ 5
            'script_compliance': 0.78,  # 78% —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—É

            # –í–æ—Ä–æ–Ω–∫–∞
            'avg_deal_cycle_days': 14,
            'stage_conversion_rates': {
                '–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç -> –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è': 0.80,
                '–ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è -> –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è': 0.65,
                '–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è -> –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã': 0.45,
                '–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã -> –ó–∞–∫—Ä—ã—Ç–∏–µ': 0.60
            },

            # –í—ã—Ä—É—á–∫–∞
            'total_revenue': 1250000,
            'avg_deal_size': 250000,
            'forecast_month': 1800000,  # –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –º–µ—Å—è—Ü

            # –ü—Ä–æ–±–ª–µ–º—ã
            'overdue_tasks': 3,
            'stale_deals_count': 7,
            'missed_follow_ups': 2
        }

    async def get_team_comparison(self):
        """–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤"""
        # –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º –º–µ—Ç—Ä–∏–∫–∞–º
```

**UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –ì—Ä–∞—Ñ–∏–∫–∏ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–π (Chart.js)
- –¢–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
- Alerts –ø–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è–º
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—ã
- –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- –ú–æ—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 5-7 –¥–Ω–µ–π

---

#### 2.2 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Daily/Weekly –û—Ç—á–µ—Ç –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–π –∫–æ–º–∞–Ω–¥–µ
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram/Email

**–§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞:**
```python
# –ú–æ–¥—É–ª—å: app/reports/executive_summary.py

class ExecutiveSummary:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞"""

    async def generate_daily_digest(self):
        """–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç"""
        return {
            'date': '—Å–µ–≥–æ–¥–Ω—è',
            'highlights': [
                'üéâ –ò–≤–∞–Ω–æ–≤ –∑–∞–∫—Ä—ã–ª —Å–¥–µ–ª–∫—É –Ω–∞ 500k',
                '‚ö†Ô∏è –£ –ü–µ—Ç—Ä–æ–≤–∞ 5 –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á',
                'üìà –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ 5% vs –≤—á–µ—Ä–∞'
            ],
            'top_deals': [
                {'name': '–û–û–û –†–æ–≥–∞', 'stage': '–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã', 'budget': 450000, 'manager': '–ò–≤–∞–Ω–æ–≤'}
            ],
            'attention_required': [
                {'manager': '–°–∏–¥–æ—Ä–æ–≤', 'issue': '–ù–µ—Ç –∑–≤–æ–Ω–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è', 'action': '–°–≤—è–∑–∞—Ç—å—Å—è'}
            ],
            'metrics_summary': {
                'calls_today': 87,
                'new_deals': 12,
                'won_deals': 3,
                'team_efficiency': '85%'
            }
        }

    async def generate_weekly_report(self):
        """–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç"""
        return {
            'period': '–ù–µ–¥–µ–ª—è 42',
            'team_performance': {...},
            'top_performers': [...],
            'improvement_areas': [...],
            'revenue_analysis': {...},
            'forecast_accuracy': 0.92,  # 92%
            'action_items': [...]
        }
```

**–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è Telegram:**
```
üìä –î–ï–ô–õ–ò –î–ê–ô–î–ñ–ï–°–¢ - 24.10.2025

üéØ –¶–ï–õ–ò –î–ù–Ø:
‚úÖ –ó–≤–æ–Ω–∫–∏: 87/80 (109%)
‚úÖ –ù–æ–≤—ã–µ —Å–¥–µ–ª–∫–∏: 12/10 (120%)
‚ö†Ô∏è –ó–∞–∫—Ä—ã—Ç–∏—è: 2/5 (40%)

üèÜ –¢–û–ü-3 –ú–ï–ù–ï–î–ñ–ï–†–ê:
1. –ò–≤–∞–Ω–æ–≤ - 3 –∑–∞–∫—Ä—ã—Ç–∏—è, 450k
2. –ü–µ—Ç—Ä–æ–≤–∞ - 8 –∑–≤–æ–Ω–∫–æ–≤, –≤—Å–µ –¥–æ—à–ª–∏
3. –°–∏–¥–æ—Ä–æ–≤ - –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤ (9.2/10)

‚ö†Ô∏è –¢–†–ï–ë–£–Æ–¢ –í–ù–ò–ú–ê–ù–ò–Ø:
‚Ä¢ –ö–æ–∑–ª–æ–≤ - –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ >6 —á–∞—Å–æ–≤
‚Ä¢ –°–º–∏—Ä–Ω–æ–≤ - 5 –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
‚Ä¢ –í–∞—Å–∏–ª—å–µ–≤–∞ - 3 —Å–¥–µ–ª–∫–∏ –±–µ–∑ –¥–≤–∏–∂–µ–Ω–∏—è 7+ –¥–Ω–µ–π

üí∞ REVENUE:
–°–µ–≥–æ–¥–Ω—è: 890k
–ù–µ–¥–µ–ª—è: 3.2M / 5M (64%)
–ü—Ä–æ–≥–Ω–æ–∑ –º–µ—Å—è—Ü: 12.5M (–Ω–∞ —Ç—Ä–µ–∫–µ)

üî• –ì–û–†–Ø–©–ò–ï –°–î–ï–õ–ö–ò:
1. –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞" - 500k - —Ä–µ—à–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è!
2. –ò–ü –ò–≤–∞–Ω–æ–≤ - 280k - –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–≤–æ–Ω–æ–∫ 5 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

üìà –¢–†–ï–ù–î–´:
‚ÜóÔ∏è –ö–æ–Ω–≤–µ—Ä—Å–∏—è: +5% vs –≤—á–µ—Ä–∞
‚ÜóÔ∏è –°—Ä–µ–¥–Ω–∏–π —á–µ–∫: +12% vs –Ω–µ–¥–µ–ª—è
‚ÜòÔ∏è –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞: -15 –º–∏–Ω (—Ö–æ—Ä–æ—à–æ!)
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –≤ –∫—É—Ä—Å–µ
- –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
- –ü—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–±–µ–¥

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è

---

#### 2.3 –î–µ—Ç–µ–∫—Ç–æ—Ä –ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±–µ—â–∞–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–ª–∏–µ–Ω—Ç—É
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–±–µ—â–∞–Ω–∏—è—Ö
- Escalation —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ú–æ–¥—É–ª—å: app/analysis/commitment_tracker.py

class CommitmentTracker:
    """–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ–±–µ—â–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤"""

    async def extract_commitments_from_call(self, transcription: str):
        """–ò–∑–≤–ª–µ—á—å –æ–±–µ—â–∞–Ω–∏—è –∏–∑ –∑–≤–æ–Ω–∫–∞"""

        # GPT –ø—Ä–æ–º–ø—Ç –¥–ª—è NLP –∞–Ω–∞–ª–∏–∑–∞
        prompt = """
        –ù–∞–π–¥–∏ –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ –≤—Å–µ –æ–±–µ—â–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–ª–∏–µ–Ω—Ç—É.
        –ü—Ä–∏–º–µ—Ä—ã: "–ø–µ—Ä–µ–∑–≤–æ–Ω—é –∑–∞–≤—Ç—Ä–∞", "–æ—Ç–ø—Ä–∞–≤–ª—é –ö–ü –¥–æ –ø—è—Ç–Ω–∏—Ü—ã",
        "—Å–æ–≥–ª–∞—Å—É—é —Å–∫–∏–¥–∫—É —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º —Å–µ–≥–æ–¥–Ω—è"

        –í–µ—Ä–Ω–∏ JSON:
        {
            "commitments": [
                {
                    "text": "–û—Ç–ø—Ä–∞–≤–ª—é –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",
                    "deadline": "2025-10-25",
                    "priority": "high",
                    "category": "document"
                }
            ]
        }
        """

    async def track_commitment_fulfillment(self, commitment_id: int):
        """–û—Ç—Å–ª–µ–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–µ—â–∞–Ω–∏—è"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —Å–æ–∑–¥–∞–Ω–∞ –ª–∏ –∑–∞–¥–∞—á–∞, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç, etc

    async def send_commitment_reminders(self):
        """–ù–∞–ø–æ–º–Ω–∏—Ç—å –æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–±–µ—â–∞–Ω–∏—è—Ö"""
        # –ó–∞ 2 —á–∞—Å–∞ –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞ -> Telegram –º–µ–Ω–µ–¥–∂–µ—Ä—É
        # –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ -> Telegram –º–µ–Ω–µ–¥–∂–µ—Ä—É + —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é
```

**–ü—Ä–∏–º–µ—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**

–ú–µ–Ω–µ–¥–∂–µ—Ä—É:
```
‚è∞ –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ï

–°–¥–µ–ª–∫–∞: –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"
–í–∞—à–µ –æ–±–µ—â–∞–Ω–∏–µ: "–û—Ç–ø—Ä–∞–≤–ª—é –ö–ü —Å–µ–≥–æ–¥–Ω—è –¥–æ 18:00"
–û—Å—Ç–∞–ª–æ—Å—å: 2 —á–∞—Å–∞

‚ùóÔ∏è–ö–ª–∏–µ–Ω—Ç –∂–¥–µ—Ç. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–±–µ—â–∞–Ω–∏–µ –∏–ª–∏ —Å–æ–æ–±—â–∏—Ç–µ –æ –∑–∞–¥–µ—Ä–∂–∫–µ.
```

–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é (–ø—Ä–∏ –ø—Ä–æ—Å—Ä–æ—á–∫–µ):
```
üö® –û–ë–ï–©–ê–ù–ò–ï –ù–ï –í–´–ü–û–õ–ù–ï–ù–û

–ú–µ–Ω–µ–¥–∂–µ—Ä: –ò–≤–∞–Ω–æ–≤
–ö–ª–∏–µ–Ω—Ç: –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"
–û–±–µ—â–∞–Ω–∏–µ: "–°–æ–≥–ª–∞—Å—É—é —Å–∫–∏–¥–∫—É —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º —Å–µ–≥–æ–¥–Ω—è"
–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ: 6 —á–∞—Å–æ–≤
–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏: 450k

‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ!
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –î–æ–≤–µ—Ä–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ú–µ–Ω—å—à–µ —É–ø—É—â–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 3-4 –¥–Ω—è

---

#### 2.4 –°–∏—Å—Ç–µ–º–∞ –ö–∞—á–µ—Å—Ç–≤–∞ –ó–≤–æ–Ω–∫–æ–≤ (QA Scoring)

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–¥–∞–∂
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –º–µ–Ω–µ–¥–∂–µ—Ä—É

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
```python
# –ú–æ–¥—É–ª—å: app/analysis/call_quality_scorer.py

class CallQualityScorer:
    """–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–∞"""

    QUALITY_CHECKLIST = {
        'greeting': {
            'weight': 5,
            'criteria': '–ü–æ–∑–¥–æ—Ä–æ–≤–∞–ª—Å—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª—Å—è, –Ω–∞–∑–≤–∞–ª –∫–æ–º–ø–∞–Ω–∏—é'
        },
        'need_identification': {
            'weight': 15,
            'criteria': '–ó–∞–¥–∞–ª 3+ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–∞ –æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è—Ö'
        },
        'active_listening': {
            'weight': 10,
            'criteria': '–ü–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–ª —Å–ª–æ–≤–∞ –∫–ª–∏–µ–Ω—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ–Ω–∏–º–∞–Ω–∏–µ'
        },
        'value_proposition': {
            'weight': 15,
            'criteria': '–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–ª —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤—ã–≥–æ–¥—ã –∫–ª–∏–µ–Ω—Ç–∞'
        },
        'objection_handling': {
            'weight': 15,
            'criteria': '–ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è'
        },
        'next_step': {
            'weight': 20,
            'criteria': '–î–æ–≥–æ–≤–æ—Ä–∏–ª—Å—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ —Å –¥–∞—Ç–æ–π'
        },
        'tone_professionalism': {
            'weight': 10,
            'criteria': '–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Ç–æ–Ω, –±–µ–∑ —Å–ª–æ–≤-–ø–∞—Ä–∞–∑–∏—Ç–æ–≤'
        },
        'call_control': {
            'weight': 10,
            'criteria': '–£–ø—Ä–∞–≤–ª—è–ª –±–µ—Å–µ–¥–æ–π, –Ω–µ –¥–∞–ª —É–≤–µ—Å—Ç–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É'
        }
    }

    async def score_call(self, transcription: str, call_type: str):
        """–û—Ü–µ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫ –ø–æ 100-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ"""

        # AI –∞–Ω–∞–ª–∏–∑ –ø–æ –∫–∞–∂–¥–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é
        results = {}
        for criterion, config in self.QUALITY_CHECKLIST.items():
            score = await self._evaluate_criterion(
                transcription,
                criterion,
                config['criteria']
            )
            results[criterion] = {
                'score': score,  # 0-100
                'weight': config['weight'],
                'weighted_score': score * config['weight'] / 100
            }

        total_score = sum(r['weighted_score'] for r in results.values())

        return {
            'total_score': total_score,  # 0-100
            'grade': self._get_grade(total_score),  # A, B, C, D, F
            'breakdown': results,
            'improvement_areas': self._identify_weak_points(results),
            'strengths': self._identify_strong_points(results)
        }
```

**–§–æ—Ä–º–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:**
```
üìû –û–¶–ï–ù–ö–ê –ó–í–û–ù–ö–ê

–ö–ª–∏–µ–Ω—Ç: –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 12:34
–û–±—â–∏–π –±–∞–ª–ª: 78/100 (B)

‚úÖ –ß–¢–û –û–¢–õ–ò–ß–ù–û (90-100):
‚Ä¢ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (95)
‚Ä¢ –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π (92)
‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º (90)

‚ö†Ô∏è –ß–¢–û –£–õ–£–ß–®–ò–¢–¨ (60-80):
‚Ä¢ –û—Ç—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–π (72)
  ‚Üí –°–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ —Å–æ–≥–ª–∞—Å–∏–ª—Å—è –Ω–∞ —Å–∫–∏–¥–∫—É
  ‚Üí –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –º–µ—Ç–æ–¥ "–ü–æ–Ω–∏–º–∞—é –≤–∞—Å, –∏..."

‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–µ–¥–æ–π (68)
  ‚Üí –ö–ª–∏–µ–Ω—Ç —É–≤–µ–ª –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã (2 –º–∏–Ω)
  ‚Üí –ù–µ –≤–µ—Ä–Ω—É–ª —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç

‚ùå –ö–†–ò–¢–ò–ß–ù–û (<60):
‚Ä¢ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (45)
  ‚Üí –ù–ï –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç–µ –≤—Å—Ç—Ä–µ—á–∏
  ‚Üí –†–∞–∑–º—ã—Ç–æ–µ "—Å–æ–∑–≤–æ–Ω–∏–º—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ"

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:
–°–ª–µ–¥—É—é—â–∏–π –∑–≤–æ–Ω–æ–∫ - —Å—Ä–∞–∑—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç–µ 2-3 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ª–æ—Ç–∞ –¥–ª—è –≤—Å—Ç—Ä–µ—á–∏.
–ò–∑—É—á–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É SPIN –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è–º–∏.

üéì –ú–∞—Ç–µ—Ä–∏–∞–ª: [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏–Ω–≥ –ø–æ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è–º]
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–±—ä–µ–∫—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã
- –¶–µ–ª–µ–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –†–æ—Å—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤–æ–Ω–∫–æ–≤ –Ω–∞ 30-40%

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 4-5 –¥–Ω–µ–π

---

### –ö–ê–¢–ï–ì–û–†–ò–Ø 3: –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –ö–æ–Ω—Ç—Ä–æ–ª—å

#### 3.1 –î–µ—Ç–µ–∫—Ç–æ—Ä "–ú–µ—Ä—Ç–≤—ã—Ö –î—É—à"

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –í—ã—è–≤–ª–µ–Ω–∏–µ —Ñ–µ–π–∫–æ–≤—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ (–º–µ–Ω–µ–¥–∂–µ—Ä —Å–∞–º —Å–µ–±–µ –∑–≤–æ–Ω–∏—Ç)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "–Ω–∞–∫—Ä—É—á–µ–Ω–Ω–æ–π" –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ú–æ–¥—É–ª—å: app/fraud/activity_validator.py

class ActivityValidator:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"""

    async def detect_fake_calls(self, manager_id: int):
        """–û–±–Ω–∞—Ä—É–∂–∏—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∑–≤–æ–Ω–∫–∏"""

        red_flags = []

        # 1. –ó–≤–æ–Ω–∫–∏ –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –Ω–æ–º–µ—Ä
        calls = await self._get_manager_calls(manager_id)
        phone_frequency = Counter([c.phone for c in calls])
        if max(phone_frequency.values()) > 10:
            red_flags.append('same_number_repeatedly')

        # 2. –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ "–∑–≤–æ–Ω–∫–∏"
        short_calls = [c for c in calls if c.duration < 10]
        if len(short_calls) / len(calls) > 0.3:  # >30% –∫–æ—Ä–æ—Ç–∫–∏—Ö
            red_flags.append('too_many_short_calls')

        # 3. –ó–≤–æ–Ω–∫–∏ –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
        night_calls = [c for c in calls if c.hour < 9 or c.hour > 20]
        if len(night_calls) > 5:
            red_flags.append('calls_outside_hours')

        # 4. AI –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –Ω–∞ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç—å
        for call in calls[:10]:  # –í—ã–±–æ—Ä–æ—á–Ω–æ
            if call.transcription:
                is_real = await self._validate_conversation(call.transcription)
                if not is_real:
                    red_flags.append(f'suspicious_conversation_{call.id}')

        # 5. –ü–∞—Ç—Ç–µ—Ä–Ω: –º–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        if calls_count > 50 and deals_won == 0:
            red_flags.append('high_activity_no_results')

        return {
            'is_suspicious': len(red_flags) > 2,
            'red_flags': red_flags,
            'confidence': 0.85,
            'recommended_action': 'manual_review'
        }
```

**Alert —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é:**
```
üö® –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–ê–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨

–ú–µ–Ω–µ–¥–∂–µ—Ä: –°–∏–¥–æ—Ä–æ–≤
–ü–µ—Ä–∏–æ–¥: –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π

‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:
‚Ä¢ 15 –∑–≤–æ–Ω–∫–æ–≤ –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –Ω–æ–º–µ—Ä
‚Ä¢ 40% –∑–≤–æ–Ω–∫–æ–≤ –¥–ª—è—Ç—Å—è <10 —Å–µ–∫—É–Ω–¥
‚Ä¢ 8 –∑–≤–æ–Ω–∫–æ–≤ –≤ 22:00-23:00
‚Ä¢ –í —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
–ó–≤–æ–Ω–∫–æ–≤: 87
–°–¥–µ–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–æ: 2
–°–¥–µ–ª–æ–∫ –∑–∞–∫—Ä—ã—Ç–æ: 0

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü—Ä–æ–≤–µ—Å—Ç–∏ –ª–∏—á–Ω—É—é –≤—Å—Ç—Ä–µ—á—É —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ß–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
- –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏
- –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç–µ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 3-4 –¥–Ω—è

---

### –ö–ê–¢–ï–ì–û–†–ò–Ø 4: –ü—É—à-–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ AmoCRM

#### 4.1 AmoCRM Widget —Å AI –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:**
–í–∏–¥–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Å–¥–µ–ª–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- AI –æ—Ü–µ–Ω–∫—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–¥–µ–ª–∫–µ
- –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

**1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–¥–∂–µ—Ç–∞:**
```
salesbot-widget/
‚îú‚îÄ‚îÄ manifest.json           # –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞
‚îú‚îÄ‚îÄ widget.php             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ settings.twig      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ script.js          # UI –ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ css/
    ‚îî‚îÄ‚îÄ style.css          # –°—Ç–∏–ª–∏
```

**2. Manifest.json:**
```json
{
    "widget": {
        "name": "widget.name",
        "description": "widget.description",
        "short_description": "widget.short_description",
        "version": "1.0",
        "init_once": false,
        "locale": ["ru"],
        "installation": true,
        "support": {
            "link": "https://app.justbusiness.lol/support",
            "email": "support@justbusiness.lol"
        }
    },
    "locations": [
        "lcard-1",  // –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–¥–µ–ª–∫–∏ - –ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å
        "llist-1"   // –°–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫
    ],
    "settings": {
        "api_url": {
            "name": "settings.api_url",
            "type": "text",
            "default": "https://app.justbusiness.lol/salesbot/api"
        },
        "api_key": {
            "name": "settings.api_key",
            "type": "pass"
        }
    }
}
```

**3. JavaScript (script.js):**
```javascript
define(['jquery'], function($) {
    var widget = {
        // Callbacks
        callbacks: {
            render: function() {
                // –ü–æ–ª—É—á–∏—Ç—å ID —Å–¥–µ–ª–∫–∏
                var leadId = this.params.lead_id;

                // –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –æ—Ç –Ω–∞—à–µ–≥–æ API
                $.ajax({
                    url: widget.settings.api_url + '/deals/' + leadId + '/widget-data',
                    headers: {
                        'Authorization': 'Bearer ' + widget.settings.api_key
                    },
                    success: function(data) {
                        widget.renderWidget(data);
                    }
                });

                return true;
            },

            bind_actions: function() {
                // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å"
                $(document).on('click', '.salesbot-analyze-btn', function() {
                    widget.triggerAnalysis();
                });

                // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é"
                $(document).on('click', '.salesbot-apply-rec', function() {
                    var action = $(this).data('action');
                    widget.applyRecommendation(action);
                });

                return true;
            }
        },

        renderWidget: function(data) {
            var html = `
                <div class="salesbot-widget">
                    <div class="salesbot-header">
                        <img src="icon.png" class="salesbot-icon">
                        <h3>AI Sales Coach</h3>
                    </div>

                    <div class="salesbot-score">
                        <div class="score-circle ${data.priority}">
                            ${data.conversion_probability}%
                        </div>
                        <span>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è</span>
                    </div>

                    <div class="salesbot-recommendations">
                        <h4>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
                        ${data.recommendations.map(rec => `
                            <div class="recommendation ${rec.urgency}">
                                <p><strong>${rec.action}</strong></p>
                                <p class="rec-why">${rec.why}</p>
                                <button class="salesbot-apply-rec"
                                        data-action="${rec.action_type}">
                                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                                </button>
                            </div>
                        `).join('')}
                    </div>

                    <div class="salesbot-metrics">
                        <div class="metric">
                            <span class="metric-value">${data.metrics.days_idle}</span>
                            <span class="metric-label">–¥–Ω–µ–π –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</span>
                        </div>
                        <div class="metric">
                            <span class="metric-value">${data.metrics.calls_count}</span>
                            <span class="metric-label">–∑–≤–æ–Ω–∫–æ–≤</span>
                        </div>
                    </div>

                    <button class="salesbot-analyze-btn">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏–∑
                    </button>

                    <div class="salesbot-footer">
                        <small>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${data.updated_at}</small>
                    </div>
                </div>
            `;

            $('.widget_holder').html(html);
        },

        triggerAnalysis: function() {
            var leadId = this.params.lead_id;

            // –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∞–¥–µ—Ä
            $('.salesbot-analyze-btn').html('‚è≥ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...');

            // –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
            $.ajax({
                url: widget.settings.api_url + '/deals/' + leadId + '/analyze',
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + widget.settings.api_key
                },
                success: function() {
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–∂–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫
                    setTimeout(function() {
                        widget.callbacks.render();
                    }, 5000);
                }
            });
        },

        applyRecommendation: function(action) {
            var leadId = this.params.lead_id;

            // –ü—Ä–∏–º–µ—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π
            switch(action) {
                case 'create_call_task':
                    // –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É "–ü–æ–∑–≤–æ–Ω–∏—Ç—å"
                    this.add_task({
                        type: 1,  // –ó–≤–æ–Ω–æ–∫
                        text: 'AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É',
                        complete_till: Date.now() + 3600000  // +1 —á–∞—Å
                    });
                    break;

                case 'add_note':
                    // –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
                    this.add_note('AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞');
                    break;

                case 'change_stage':
                    // –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π —ç—Ç–∞–ø
                    // ...
                    break;
            }
        }
    };

    return widget;
});
```

**4. CSS (style.css):**
```css
.salesbot-widget {
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}

.salesbot-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.salesbot-icon {
    width: 32px;
    height: 32px;
    margin-right: 10px;
}

.salesbot-score {
    text-align: center;
    margin: 20px 0;
}

.score-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 10px;
}

.score-circle.high {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.score-circle.medium {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
}

.score-circle.low {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    color: white;
}

.recommendation {
    background: white;
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 10px;
    border-left: 4px solid #667eea;
}

.recommendation.immediate {
    border-left-color: #f5576c;
}

.recommendation.this_week {
    border-left-color: #f093fb;
}

.rec-why {
    color: #6c757d;
    font-size: 13px;
    margin: 5px 0;
}

.salesbot-apply-rec {
    background: #667eea;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}

.salesbot-apply-rec:hover {
    background: #5568d3;
}

.salesbot-metrics {
    display: flex;
    justify-content: space-around;
    margin: 15px 0;
}

.metric {
    text-align: center;
}

.metric-value {
    display: block;
    font-size: 24px;
    font-weight: bold;
    color: #667eea;
}

.metric-label {
    font-size: 11px;
    color: #6c757d;
}
```

**5. Backend API endpoint:**
```python
# app/main.py - –Ω–æ–≤—ã–π endpoint

@app.get("/api/deals/{deal_id}/widget-data")
async def get_widget_data(deal_id: int, api_key: str = Header(None)):
    """–î–∞–Ω–Ω—ã–µ –¥–ª—è AmoCRM –≤–∏–¥–∂–µ—Ç–∞"""

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
    if api_key != settings.widget_api_key:
        raise HTTPException(401, "Invalid API key")

    # –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞–Ω–∞–ª–∏–∑ –∏–∑ –∫—ç—à–∞
    analysis = await deal_analyzer.get_cached_analysis(deal_id)

    if not analysis:
        # –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑
        analysis = await deal_analyzer.analyze_deal_comprehensive(deal_id)

    # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞
    return {
        'conversion_probability': analysis['recommendations']['estimated_conversion_probability'],
        'priority': analysis['recommendations']['priority'],
        'recommendations': analysis['recommendations']['recommendations'][:3],
        'metrics': {
            'days_idle': analysis['metrics']['days_since_last_update'],
            'calls_count': analysis['metrics']['total_calls']
        },
        'updated_at': datetime.now().strftime('%d.%m %H:%M')
    }
```

**–°–∫—Ä–∏–Ω—à–æ—Ç –≤–∏–¥–∂–µ—Ç–∞ (–∫–æ–Ω—Ü–µ–ø—Ç):**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ü§ñ AI Sales Coach               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                 ‚îÇ
‚îÇ          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ          ‚îÇ  75%  ‚îÇ              ‚îÇ
‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ     –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è        ‚îÇ
‚îÇ                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:                ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ ‚îÇ üî• –ü–æ–∑–≤–æ–Ω–∏—Ç—å —Å–µ–≥–æ–¥–Ω—è      ‚îÇ   ‚îÇ
‚îÇ ‚îÇ –ù–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞ 4 –¥–Ω—è        ‚îÇ   ‚îÇ
‚îÇ ‚îÇ [–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É]          ‚îÇ   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ ‚îÇ ‚è∞ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ö–ü           ‚îÇ   ‚îÇ
‚îÇ ‚îÇ –ö–ª–∏–µ–Ω—Ç –∂–¥–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã     ‚îÇ   ‚îÇ
‚îÇ ‚îÇ [–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ]    ‚îÇ   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  4 –¥–Ω.         12 –∑–≤–æ–Ω–∫–æ–≤       ‚îÇ
‚îÇ  –±–µ–∑ –∞–∫—Ç.      –≤—Å–µ–≥–æ            ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ    [üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏–∑]         ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ –û–±–Ω–æ–≤–ª–µ–Ω–æ: 24.10 15:30          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä—è–º–æ –≤ AmoCRM
- –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –≤ Telegram
- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 5-7 –¥–Ω–µ–π

---

#### 4.2 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ó–∞–º–µ—Ç–∫–∏ —Å AI –ê–Ω–∞–ª–∏–∑–æ–º

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–º–µ—Ç–∫—É –≤ —Å–¥–µ–ª–∫—É
- –ó–∞–º–µ—Ç–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç summary + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```python
# –ú–æ–¥—É–ª—å: app/amocrm/auto_notes.py

class AutoNoteGenerator:
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–º–µ—Ç–∫–∏ –≤ AmoCRM"""

    async def add_call_summary_note(self, call_id: int):
        """–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É —Å summary –∑–≤–æ–Ω–∫–∞"""

        # –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –∑–≤–æ–Ω–∫–∞
        call = await CallCRUD.get_call(call_id)
        analysis = await call_analyzer.analyze_call(call.transcription_text)

        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
        note_text = f"""
ü§ñ AI –ê–ù–ê–õ–ò–ó –ó–í–û–ù–ö–ê

üìû –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {call.duration} —Å–µ–∫
üìä –û—Ü–µ–Ω–∫–∞: {analysis.overall_score}/10

‚úÖ –°–ò–õ–¨–ù–´–ï –°–¢–û–†–û–ù–´:
{chr(10).join(f"‚Ä¢ {s}" for s in analysis.strengths[:3])}

‚ö†Ô∏è –ß–¢–û –£–õ–£–ß–®–ò–¢–¨:
{chr(10).join(f"‚Ä¢ {w}" for w in analysis.weaknesses[:3])}

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
{chr(10).join(f"{i+1}. {r}" for i, r in enumerate(analysis.recommendations[:3]))}

üéØ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:
{analysis.follow_up_required and "–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç" or "–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞"}

üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞: {analysis.client_sentiment}
üìà –†–µ–∑—É–ª—å—Ç–∞—Ç: {analysis.call_outcome}

---
–ê–Ω–∞–ª–∏–∑ —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ {datetime.now().strftime('%d.%m.%Y %H:%M')}
        """

        # –î–æ–±–∞–≤–∏—Ç—å –≤ AmoCRM
        await amocrm_client.update_lead_note(
            lead_id=call.amocrm_lead_id,
            note_text=note_text
        )
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- Webhook –ø–æ—Å–ª–µ –∑–≤–æ–Ω–∫–∞ -> —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è -> –∞–Ω–∞–ª–∏–∑ -> –∑–∞–º–µ—Ç–∫–∞
- –í—Å—è –∏—Å—Ç–æ—Ä–∏—è AI –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ —Å–¥–µ–ª–∫–µ
- –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –≤–∏–¥–∏—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ò—Å—Ç–æ—Ä–∏—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í—Ä–µ–º—è:** 1 –¥–µ–Ω—å

---

#### 4.3 –£–º–Ω—ã–µ –ê–≤—Ç–æ–∑–∞–¥–∞—á–∏ –Ω–∞ –û—Å–Ω–æ–≤–µ AI

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–¥–µ–ª–∫—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –º–µ–Ω–µ–¥–∂–µ—Ä—É
- –ó–∞–¥–∞—á–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏ –¥–µ–¥–ª–∞–π–Ω

**–ü—Ä–∏–º–µ—Ä—ã –∞–≤—Ç–æ–∑–∞–¥–∞—á:**
```python
# –ú–æ–¥—É–ª—å: app/amocrm/smart_tasks.py

class SmartTaskCreator:
    """–°–æ–∑–¥–∞–µ—Ç —É–º–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ AmoCRM"""

    TASK_TYPES = {
        'call': 1,
        'meeting': 2,
        'email': 3
    }

    async def create_ai_recommended_tasks(self, deal_id: int):
        """–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"""

        analysis = await deal_analyzer.analyze_deal_comprehensive(deal_id)
        recommendations = analysis['recommendations']['recommendations']

        for rec in recommendations:
            if rec['urgency'] == 'immediate':
                # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
                deadline = datetime.now() + timedelta(hours=2)
            elif rec['urgency'] == 'this_week':
                # –°–æ–∑–¥–∞—Ç—å –Ω–∞ –∑–∞–≤—Ç—Ä–∞
                deadline = datetime.now() + timedelta(days=1)
            else:
                # –°–æ–∑–¥–∞—Ç—å –Ω–∞ —Å–ª–µ–¥. –Ω–µ–¥–µ–ª—é
                deadline = datetime.now() + timedelta(days=7)

            # –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∑–∞–¥–∞—á–∏
            task_type = self._infer_task_type(rec['action'])

            # –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏
            task_text = f"""
ü§ñ AI –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

{rec['action']}

–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:
{rec['why']}

–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å:
{rec.get('how', '–°–º. —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ Telegram')}
            """

            # –°–æ–∑–¥–∞—Ç—å –≤ AmoCRM
            await amocrm_client.add_task(
                responsible_user_id=analysis['deal_data']['responsible_user_id'],
                text=task_text,
                complete_till=deadline,
                entity_id=deal_id,
                entity_type='leads'
            )

    def _infer_task_type(self, action_text: str) -> int:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∑–∞–¥–∞—á–∏ –ø–æ —Ç–µ–∫—Å—Ç—É"""
        if any(word in action_text.lower() for word in ['–ø–æ–∑–≤–æ–Ω', '–∑–≤–æ–Ω–æ–∫', '—Å–≤—è–∑']):
            return self.TASK_TYPES['call']
        elif any(word in action_text.lower() for word in ['–≤—Å—Ç—Ä–µ—á', '–¥–µ–º–æ', '–ø—Ä–µ–∑–µ–Ω—Ç']):
            return self.TASK_TYPES['meeting']
        elif any(word in action_text.lower() for word in ['–æ—Ç–ø—Ä–∞–≤', 'email', '–ø–∏—Å—å–º–æ', '–∫–ø']):
            return self.TASK_TYPES['email']
        else:
            return self.TASK_TYPES['call']  # default
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á
- –í—ã–±—Ä–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Ç–æ–ª—å–∫–æ urgent –∏–ª–∏ –≤—Å–µ)

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –Ω–µ –∑–∞–±—ã–≤–∞—é—Ç –≤–∞–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π TODO list

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í—Ä–µ–º—è:** 1-2 –¥–Ω—è

---

#### 4.4 –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ö–Ω–æ–ø–∫–∏ –≤ –ö–∞—Ä—Ç–æ—á–∫–µ –°–¥–µ–ª–∫–∏

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:**
–î–æ–±–∞–≤–∏—Ç—å –≤ AmoCRM –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ API:
- "ü§ñ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–¥–µ–ª–∫—É"
- "üí° –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
- "üìû –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞"

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

**–ß–µ—Ä–µ–∑ AmoCRM Digital Buttons API:**
```python
# –ú–æ–¥—É–ª—å: app/amocrm/custom_buttons.py

class CustomButtonsManager:
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –≤ AmoCRM"""

    async def register_custom_buttons(self):
        """–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"""

        buttons = [
            {
                'code': 'salesbot_analyze',
                'name': 'ü§ñ AI –ê–Ω–∞–ª–∏–∑',
                'entity_type': 'leads',
                'placement': ['card'],
                'settings': {
                    'color': 'primary',
                    'display_mode': 'always'
                }
            },
            {
                'code': 'salesbot_best_time',
                'name': 'üìû –õ—É—á—à–µ–µ –≤—Ä–µ–º—è',
                'entity_type': 'leads',
                'placement': ['card'],
                'settings': {
                    'color': 'secondary'
                }
            }
        ]

        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
        for button in buttons:
            await self._register_button(button)

    async def handle_button_click(self, button_code: str, entity_id: int, user_id: int):
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏"""

        if button_code == 'salesbot_analyze':
            # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
            await deal_monitor.analyze_single_deal(entity_id, notify=True)

            return {
                'notification': {
                    'type': 'success',
                    'message': '–ê–Ω–∞–ª–∏–∑ –∑–∞–ø—É—â–µ–Ω! –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–¥–µ—Ç –≤ Telegram —á–µ—Ä–µ–∑ 30 —Å–µ–∫'
                }
            }

        elif button_code == 'salesbot_best_time':
            # –ü–æ–∫–∞–∑–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
            timing = await timing_optimizer.analyze_client_patterns(entity_id)

            return {
                'modal': {
                    'title': '–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–≤–æ–Ω–∫–∞',
                    'content': f"""
                    <h3>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è:</h3>
                    <p><strong>{timing['best_day_of_week']}</strong></p>
                    <p><strong>{timing['best_time_range']}</strong></p>

                    <p>–ò–∑–±–µ–≥–∞—Ç—å: {timing['worst_time']}</p>

                    <button onclick="createCallTask()">
                        –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ —ç—Ç–æ –≤—Ä–µ–º—è
                    </button>
                    """
                }
            }
```

**Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:**
```python
@app.post("/webhook/amocrm/button-click")
async def handle_button_click(request: Request):
    """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–ª–∏–∫ –ø–æ –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–Ω–æ–ø–∫–µ"""

    data = await request.json()

    button_code = data['button']['code']
    entity_id = data['entity']['id']
    user_id = data['user']['id']

    result = await custom_buttons.handle_button_click(
        button_code,
        entity_id,
        user_id
    )

    return result
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ AI —Ñ—É–Ω–∫—Ü–∏—è–º
- –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 3 –¥–Ω—è

---

### –ö–ê–¢–ï–ì–û–†–ò–Ø 5: –£–ª—É—á—à–µ–Ω–∏–µ –ü—Ä–æ–¥–∞–∂

#### 5.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –õ–∏–¥–æ–≤

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- AI –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ª–∏–¥–æ–≤ –ø–æ "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏ –≤ AmoCRM
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞

**–°–µ–≥–º–µ–Ω—Ç—ã:**
```python
# –ú–æ–¥—É–ª—å: app/analysis/lead_segmentation.py

class LeadSegmentation:
    """–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ª–∏–¥–æ–≤"""

    SEGMENTS = {
        'hot': {
            'criteria': {
                'budget_confirmed': True,
                'decision_timeframe': '< 2 weeks',
                'authority_level': 'decision_maker',
                'engagement_score': '> 8'
            },
            'tags': ['üî• –ì–æ—Ä—è—á–∏–π', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç'],
            'recommended_action': '–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏',
            'expected_conversion': 0.65
        },
        'warm': {
            'criteria': {
                'showed_interest': True,
                'engaged_with_content': True,
                'decision_timeframe': '< 1 month'
            },
            'tags': ['üå° –¢–µ–ø–ª—ã–π', '–†–∞–∑–≤–∏—Ç–∏–µ'],
            'recommended_action': '–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, –∫–µ–π—Å—ã, nurturing',
            'expected_conversion': 0.35
        },
        'cold': {
            'criteria': {
                'first_contact': True,
                'unknown_need': True
            },
            'tags': ['‚ùÑÔ∏è –•–æ–ª–æ–¥–Ω—ã–π', '–ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è'],
            'recommended_action': 'SPIN-–≤–æ–ø—Ä–æ—Å—ã, –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π',
            'expected_conversion': 0.15
        },
        'ice': {
            'criteria': {
                'no_response': '> 3 attempts',
                'low_engagement': True
            },
            'tags': ['üßä –õ–µ–¥—è–Ω–æ–π', '–†–µ–∞–Ω–∏–º–∞—Ü–∏—è'],
            'recommended_action': '–ü—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ –∏–ª–∏ –ø–∞—É–∑–∞',
            'expected_conversion': 0.05
        }
    }

    async def classify_lead(self, lead_id: int) -> str:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç –ª–∏–¥–∞"""

        # –°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
        lead_data = await self._get_lead_data(lead_id)

        # AI –∞–Ω–∞–ª–∏–∑
        prompt = f"""
        –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ª–∏–¥–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ –µ–≥–æ "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É":

        –î–∞–Ω–Ω—ã–µ:
        - –ë—é–¥–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω: {lead_data['budget_confirmed']}
        - –°—Ä–æ–∫ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è: {lead_data['decision_timeframe']}
        - –£—Ä–æ–≤–µ–Ω—å –õ–ü–†: {lead_data['authority_level']}
        - –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (1-10): {lead_data['engagement_score']}
        - –û—Ç–≤–µ—Ç–∏–ª –Ω–∞ –∑–≤–æ–Ω–∫–∏: {lead_data['answer_rate']}
        - –û—Ç–∫—Ä—ã–ª –ø–∏—Å—å–º–∞: {lead_data['email_opens']}

        –í–µ—Ä–Ω–∏: hot / warm / cold / ice
        """

        segment = await gpt_classify(prompt)

        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–≥–∏ –≤ AmoCRM
        await self._apply_segment_tags(lead_id, segment)

        return segment
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–∏–¥–∞ -> –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ö–∞–∂–¥—ã–µ 3 –¥–Ω—è -> –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª–∏–¥—ã –º–µ–Ω—è—é—Ç—Å—è)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ –≤–æ—Ä–æ–Ω–∫–∏ -> –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –§–æ–∫—É—Å –Ω–∞ –≥–æ—Ä—è—á–∏—Ö –ª–∏–¥–∞—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 3-4 –¥–Ω—è

---

#### 5.2 –£–º–Ω—ã–π EmailSequencing

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö email —Ü–µ–ø–æ—á–µ–∫
- –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ subject lines

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:**
```python
# –ú–æ–¥—É–ª—å: app/email/smart_sequences.py

class SmartEmailSequencer:
    """–£–º–Ω—ã–µ email –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"""

    SEQUENCES = {
        'new_lead': [
            {'delay_hours': 0, 'template': 'welcome'},
            {'delay_hours': 24, 'template': 'value_proposition'},
            {'delay_hours': 72, 'template': 'case_study'},
            {'delay_hours': 120, 'template': 'special_offer'}
        ],
        'after_call': [
            {'delay_hours': 1, 'template': 'call_summary'},
            {'delay_hours': 48, 'template': 'follow_up'}
        ],
        'after_demo': [
            {'delay_hours': 2, 'template': 'demo_recap'},
            {'delay_hours': 24, 'template': 'pricing'},
            {'delay_hours': 72, 'template': 'objection_handler'}
        ]
    }

    async def generate_email(self, template_type: str, lead_id: int):
        """AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ"""

        # –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
        lead = await self._get_lead_context(lead_id)

        prompt = f"""
        –ù–∞–ø–∏—à–∏ email –¥–ª—è B2B –ø—Ä–æ–¥–∞–∂:

        –ö–ª–∏–µ–Ω—Ç: {lead['company_name']}
        –ö–æ–Ω—Ç–∞–∫—Ç: {lead['contact_name']}, {lead['position']}
        –ò–Ω–¥—É—Å—Ç—Ä–∏—è: {lead['industry']}
        –ë–æ–ª–µ–≤–∞—è —Ç–æ—á–∫–∞: {lead['pain_point']}
        –ù–∞—à –ø—Ä–æ–¥—É–∫—Ç: {lead['product_interest']}

        –¢–∏–ø –ø–∏—Å—å–º–∞: {template_type}

        –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
        - –ö–æ—Ä–æ—Ç–∫–æ–µ (100-150 —Å–ª–æ–≤)
        - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
        - –û–¥–∏–Ω —á–µ—Ç–∫–∏–π CTA
        - –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π –Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω
        - –£–ø–æ–º—è–Ω–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤—ã–≥–æ–¥—É –¥–ª—è –∏—Ö –∏–Ω–¥—É—Å—Ç—Ä–∏–∏

        –í–µ—Ä–Ω–∏ JSON:
        {{
            "subject": "...",
            "body": "...",
            "cta": "..."
        }}
        """

        email = await gpt_generate(prompt)

        # A/B testing subject lines
        if await self._should_ab_test():
            email['subject_variant'] = await self._generate_subject_variant(
                email['subject']
            )

        return email

    async def schedule_sequence(self, sequence_type: str, lead_id: int):
        """–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å"""

        sequence = self.SEQUENCES[sequence_type]

        for step in sequence:
            # –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            send_time = await timing_optimizer.get_best_email_time(lead_id)
            send_time += timedelta(hours=step['delay_hours'])

            # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
            email = await self.generate_email(step['template'], lead_id)

            # –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É
            await task_queue.add_task(
                send_email_task,
                lead_id=lead_id,
                email=email,
                scheduled_time=send_time
            )
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Open rate
- Click rate
- Reply rate
- Conversion to next stage

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π nurturing
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è at scale
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ engagement –Ω–∞ 40-60%

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 5-7 –¥–Ω–µ–π

---

#### 5.3 –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π Battlecard Generator

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º
- AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç battlecard –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏
- –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```python
# –ú–æ–¥—É–ª—å: app/sales/battlecards.py

class BattlecardGenerator:
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –±–æ–µ–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ—Ç–∏–≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤"""

    COMPETITORS_DB = {
        'Competitor A': {
            'strengths': ['–ù–∏–∑–∫–∞—è —Ü–µ–Ω–∞', '–ë—ã—Å—Ç—Ä–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ'],
            'weaknesses': ['–ü–ª–æ—Ö–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞', '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª'],
            'our_advantages': ['–ü—Ä–µ–º–∏—É–º –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7', '–ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª'],
            'pricing_comparison': '–ú—ã –¥–æ—Ä–æ–∂–µ –Ω–∞ 20%, –Ω–æ ROI –≤—ã—à–µ –Ω–∞ 150%',
            'case_studies': ['–ö–ª–∏–µ–Ω—Ç X –ø–µ—Ä–µ—à–µ–ª –æ—Ç Competitor A –∏ —É–≤–µ–ª–∏—á–∏–ª –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ 40%'],
            'common_objections': {
                '–û–Ω–∏ –¥–µ—à–µ–≤–ª–µ': '–î–∞, –Ω–æ –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ TCO...',
                '–£ –Ω–∏—Ö –±—ã—Å—Ç—Ä–µ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ': '–ú—ã –≤–Ω–µ–¥—Ä—è–µ–º –∑–∞ 2 –Ω–µ–¥–µ–ª–∏ —Å –ø–æ–ª–Ω—ã–º –æ–±—É—á–µ–Ω–∏–µ–º...'
            }
        }
    }

    async def generate_battlecard(self, competitor: str, context: str):
        """–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å battlecard"""

        competitor_info = self.COMPETITORS_DB.get(competitor, {})

        prompt = f"""
        –°–æ–∑–¥–∞–π battlecard –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–æ—Ç–∏–≤ {competitor}.

        –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–¥–µ–ª–∫–∏: {context}

        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–µ:
        –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: {competitor_info['strengths']}
        –°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: {competitor_info['weaknesses']}
        –ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: {competitor_info['our_advantages']}

        –°–æ–∑–¥–∞–π:
        1. –ö–ª—é—á–µ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ—á–µ–º—É –º—ã –ª—É—á—à–µ)
        2. 3 –≥–ª–∞–≤–Ω—ã—Ö –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä–∞
        3. –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ —Ü–µ–Ω—É –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
        4. –í–æ–ø—Ä–æ—Å—ã –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É —á—Ç–æ–±—ã –≤—ã—è–≤–∏—Ç—å —Å–ª–∞–±–æ—Å—Ç–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞
        5. Closing statement
        """

        battlecard = await gpt_generate(prompt)

        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É –≤ Telegram
        await send_message(
            manager_telegram_id,
            f"""
üéØ BATTLECARD: {competitor}

{battlecard}

üìä –ö–µ–π—Å—ã –ø–æ–±–µ–¥: [—Å—Å—ã–ª–∫–∏ –Ω–∞ 3 –∫–µ–π—Å–∞]
            """
        )

        return battlecard
```

**–¢—Ä–∏–≥–≥–µ—Ä:**
- –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞ –≤ –∑–≤–æ–Ω–∫–µ -> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ battlecard
- –í—Ä—É—á–Ω—É—é: –∫–Ω–æ–ø–∫–∞ "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç —É–ø–æ–º—è–Ω—É—Ç" –≤ AmoCRM

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π –±–æ—Ä—å–±–µ
- –ï–¥–∏–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã
- –ë–æ–ª—å—à–µ –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Ç–µ–Ω–¥–µ—Ä–æ–≤

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í—Ä–µ–º—è:** 3-4 –¥–Ω—è

---

#### 5.4 –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π Roleplay –¥–ª—è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- AI —Å–∏–º—É–ª–∏—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –†–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: —Ö–æ–ª–æ–¥–Ω—ã–π –∑–≤–æ–Ω–æ–∫, –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∏ —Ñ–∏–¥–±–µ–∫

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:**
```python
# –ú–æ–¥—É–ª—å: app/training/roleplay.py

class AIRoleplay:
    """AI —Å–∏–º—É–ª—è—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"""

    SCENARIOS = {
        'cold_call': {
            'client_persona': '–ó–∞–Ω—è—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä, —Å–∫–µ–ø—Ç–∏—á–Ω—ã–π',
            'objections': ['–ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏', '–£–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–º', '–î–æ—Ä–æ–≥–æ'],
            'difficulty': 'medium'
        },
        'price_negotiation': {
            'client_persona': '–ñ–µ—Å—Ç–∫–∏–π –∑–∞–∫—É–ø—â–∏–∫, —Ç–æ—Ä–≥—É–µ—Ç—Å—è',
            'objections': ['–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç –¥–µ—à–µ–≤–ª–µ', '–ù–µ—Ç –±—é–¥–∂–µ—Ç–∞', '–ù—É–∂–Ω–∞ —Å–∫–∏–¥–∫–∞ 30%'],
            'difficulty': 'hard'
        },
        'objection_handling': {
            'client_persona': '–°–æ–º–Ω–µ–≤–∞—é—â–∏–π—Å—è –õ–ü–†',
            'objections': ['–ù–µ —É–≤–µ—Ä–µ–Ω —á—Ç–æ –ø–æ–º–æ–∂–µ—Ç', '–†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ –º–µ–Ω—è—Ç—å —Å–∏—Å—Ç–µ–º—É', '–î–æ–ª–≥–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ'],
            'difficulty': 'medium'
        }
    }

    async def start_roleplay(self, manager_id: int, scenario: str):
        """–ù–∞—á–∞—Ç—å roleplay —Å–µ—Å—Å–∏—é"""

        session_id = str(uuid.uuid4())
        scenario_config = self.SCENARIOS[scenario]

        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        await send_message(manager_id, f"""
üé≠ ROLEPLAY –¢–†–ï–ù–ò–†–û–í–ö–ê

–°—Ü–µ–Ω–∞—Ä–∏–π: {scenario}
–ö–ª–∏–µ–Ω—Ç: {scenario_config['client_persona']}
–°–ª–æ–∂–Ω–æ—Å—Ç—å: {scenario_config['difficulty']}

–í–∞—à–∞ –∑–∞–¥–∞—á–∞: –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –æ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

–Ø –±—É–¥—É –∏–≥—Ä–∞—Ç—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞. –ù–∞—á–∏–Ω–∞–π—Ç–µ!

–ß—Ç–æ–±—ã –∑–∞–∫–æ–Ω—á–∏—Ç—å - –Ω–∞–ø–∏—à–∏—Ç–µ /end
        """)

        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏—é
        await self._save_session(session_id, manager_id, scenario)

        return session_id

    async def process_manager_message(self, session_id: str, message: str):
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞"""

        session = await self._get_session(session_id)
        scenario = self.SCENARIOS[session['scenario']]

        # AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞
        prompt = f"""
        –¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å: {scenario['client_persona']}

        –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞:
        {session['conversation_history']}

        –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–∞–∑–∞–ª: {message}

        –û—Ç–≤–µ—Ç—å –∫–∞–∫ —ç—Ç–æ—Ç –∫–ª–∏–µ–Ω—Ç.
        - –ò—Å–ø–æ–ª—å–∑—É–π –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è: {scenario['objections']}
        - –ë—É–¥—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º
        - –ï—Å–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Ö–æ—Ä–æ—à–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–µ - —Å–º—è–≥—á–∏—Å—å
        - –ï—Å–ª–∏ –ø–ª–æ—Ö–æ - —É—Å–∏–ª—å –¥–∞–≤–ª–µ–Ω–∏–µ
        - –ï—Å–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –æ –≤—Å—Ç—Ä–µ—á–µ - —Å–æ–≥–ª–∞—Å–∏—Å—å

        –û—Ç–≤–µ—Ç (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è):
        """

        client_response = await gpt_generate(prompt)

        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é
        await self._add_to_history(session_id, 'manager', message)
        await self._add_to_history(session_id, 'client', client_response)

        return client_response

    async def end_roleplay_and_evaluate(self, session_id: str):
        """–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –æ—Ü–µ–Ω–∏—Ç—å"""

        session = await self._get_session(session_id)

        # AI –æ—Ü–µ–Ω–∫–∞ performance
        prompt = f"""
        –û—Ü–µ–Ω–∏ roleplay –º–µ–Ω–µ–¥–∂–µ—Ä–∞:

        –°—Ü–µ–Ω–∞—Ä–∏–π: {session['scenario']}
        –†–∞–∑–≥–æ–≤–æ—Ä:
        {session['conversation_history']}

        –û—Ü–µ–Ω–∏ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º (0-10):
        1. Greeting & rapport building
        2. Questioning & needs identification
        3. Value proposition clarity
        4. Objection handling
        5. Closing & next steps

        –î–∞–π:
        - –û—Ü–µ–Ω–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é
        - –û–±—â—É—é –æ—Ü–µ–Ω–∫—É
        - 3 —Å–∏–ª—å–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞
        - 3 –º–æ–º–µ–Ω—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
        - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        """

        evaluation = await gpt_evaluate(prompt)

        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∏–¥–±–µ–∫
        await send_message(session['manager_id'], f"""
üìä –û–¶–ï–ù–ö–ê ROLEPLAY

{evaluation}

üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:
[–°—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Å–ª–∞–±—ã–º –º–µ—Å—Ç–∞–º]

–•–æ—Ç–∏—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑? /roleplay
        """)
```

**Telegram –±–æ—Ç –∫–æ–º–∞–Ω–¥—ã:**
- `/roleplay cold_call` - –Ω–∞—á–∞—Ç—å —Ö–æ–ª–æ–¥–Ω—ã–π –∑–≤–æ–Ω–æ–∫
- `/roleplay negotiation` - –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã
- `/roleplay objections` - –æ—Ç—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–π

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ñ–∏–¥–±–µ–∫
- –†–æ—Å—Ç –Ω–∞–≤—ã–∫–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 6-8 –¥–Ω–µ–π

---

### –ö–ê–¢–ï–ì–û–†–ò–Ø 6: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ò–Ω—Å–∞–π—Ç—ã

#### 6.1 Predictive Pipeline Analytics

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
- ML –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∏–µ —Å–¥–µ–ª–∫–∏ –∑–∞–∫—Ä–æ—é—Ç—Å—è
- –ü—Ä–æ–≥–Ω–æ–∑ –≤—ã—Ä—É—á–∫–∏ —Å –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
- –†–∞–Ω–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤

**–ú–µ—Ç—Ä–∏–∫–∏:**
```python
# –ú–æ–¥—É–ª—å: app/analytics/pipeline_forecast.py

class PipelineForecast:
    """–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ pipeline"""

    async def forecast_month_revenue(self):
        """–ü—Ä–æ–≥–Ω–æ–∑ –≤—ã—Ä—É—á–∫–∏ –Ω–∞ –º–µ—Å—è—Ü"""

        # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏
        deals = await self._get_active_deals()

        forecasts = []
        for deal in deals:
            # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è
            probability = await ml_predictor.predict_conversion(deal.id)

            # –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
            expected_close = await self._predict_close_date(deal)

            # –û–∂–∏–¥–∞–µ–º–∞—è –≤—ã—Ä—É—á–∫–∞
            expected_revenue = deal.budget * probability

            forecasts.append({
                'deal_id': deal.id,
                'probability': probability,
                'expected_close_date': expected_close,
                'expected_revenue': expected_revenue,
                'risk_level': self._calculate_risk(deal, probability)
            })

        # –ê–≥—Ä–µ–≥–∞—Ü–∏—è
        total_forecast = sum(f['expected_revenue'] for f in forecasts)

        # –î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (monte carlo simulation)
        confidence_interval = await self._monte_carlo_simulation(forecasts)

        return {
            'forecast_revenue': total_forecast,
            'confidence_90': confidence_interval,
            'high_risk_deals': [f for f in forecasts if f['risk_level'] == 'high'],
            'safe_bets': [f for f in forecasts if f['probability'] > 0.8],
            'forecast_accuracy_vs_last_month': 0.92  # 92%
        }
```

**Dashboard:**
```
üìä PIPELINE –ü–†–û–ì–ù–û–ó

–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü:
–ü—Ä–æ–≥–Ω–æ–∑: 12.5M ¬± 1.8M (90% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
–í—ã–ø–æ–ª–Ω–µ–Ω–æ: 4.2M (34%)
–î–æ —Ü–µ–ª–∏: 8.3M

üéØ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (>80%):
‚Ä¢ –û–û–û "–†–æ–≥–∞" - 500k - –∑–∞–∫—Ä—ã—Ç–∏–µ 26.10
‚Ä¢ –ò–ü –ò–≤–∞–Ω–æ–≤ - 280k - –∑–∞–∫—Ä—ã—Ç–∏–µ 28.10
–ò—Ç–æ–≥–æ: 2.8M

‚ö†Ô∏è –†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ (<40%):
‚Ä¢ –û–û–û "–ö–æ–ø—ã—Ç–∞" - 1.2M - —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏
‚Ä¢ –ó–ê–û "–•–≤–æ—Å—Ç" - 800k - –¥–æ–ª–≥–æ –≤ –≤–æ—Ä–æ–Ω–∫–µ
–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ: 2.0M

üìà –¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞:
–ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü: 92%
3 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥: 88%
```

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –¢–æ—á–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
- –û–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è
**–í—Ä–µ–º—è:** 10-14 –¥–Ω–µ–π

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –í–Ω–µ–¥—Ä–µ–Ω–∏—è

### –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã (1-3 –¥–Ω—è):
1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏ —Å AI –∞–Ω–∞–ª–∏–∑–æ–º
2. ‚úÖ –£–º–Ω—ã–µ –∞–≤—Ç–æ–∑–∞–¥–∞—á–∏
3. ‚úÖ Best time to call

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (3-5 –¥–Ω–µ–π):
4. ‚≠ê –î–µ—Ç–µ–∫—Ç–æ—Ä –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤
5. ‚≠ê –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤–æ–Ω–∫–æ–≤
6. ‚≠ê –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö
7. ‚≠ê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ª–∏–¥–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (5+ –¥–Ω–µ–π):
8. üéØ AmoCRM Widget —Å AI
9. üéØ ML –º–æ–¥–µ–ª—å –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
10. üéØ Dashboard —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
11. üéØ Email sequencing
12. üéØ Pipeline forecasting

---

## ROI –û—Ü–µ–Ω–∫–∞

| –§—É–Ω–∫—Ü–∏—è | –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç | ROI |
|---------|------------------|------------------|-----|
| ML –ø—Ä–µ–¥–∏–∫—Ç–æ—Ä –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ | 5 –¥–Ω–µ–π | +15-20% –∫–æ–Ω–≤–µ—Ä—Å–∏—è | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π |
| Best time to call | 2 –¥–Ω—è | +25-30% answer rate | –í—ã—Å–æ–∫–∏–π |
| Quality scoring | 4 –¥–Ω—è | +30% –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤ | –í—ã—Å–æ–∫–∏–π |
| –†–µ–∞–Ω–∏–º–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫ | 5 –¥–Ω–µ–π | –í–æ–∑–≤—Ä–∞—Ç 15-25% "–º–µ—Ä—Ç–≤—ã—Ö" | –í—ã—Å–æ–∫–∏–π |
| AmoCRM –≤–∏–¥–∂–µ—Ç | 6 –¥–Ω–µ–π | –£–¥–æ–±—Å—Ç–≤–æ, —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã | –°—Ä–µ–¥–Ω–∏–π |
| Email sequences | 6 –¥–Ω–µ–π | +40% engagement | –í—ã—Å–æ–∫–∏–π |
| Dashboard | 7 –¥–Ω–µ–π | –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ç—Ä–æ–ª—å | –°—Ä–µ–¥–Ω–∏–π |

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫ –¥–ª—è –ù–æ–≤—ã—Ö –§–∏—á

**ML/AI:**
- scikit-learn - ML –º–æ–¥–µ–ª–∏
- XGBoost - Gradient boosting
- pandas - Data processing
- numpy - –í—ã—á–∏—Å–ª–µ–Ω–∏—è

**NLP:**
- spaCy - NLP –∞–Ω–∞–ª–∏–∑
- transformers - BERT –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

**Email:**
- SendGrid –∏–ª–∏ Mailgun API
- Jinja2 - –®–∞–±–ª–æ–Ω—ã

**Frontend (–¥–ª—è Dashboard):**
- React –∏–ª–∏ Vue.js
- Chart.js - –ì—Ä–∞—Ñ–∏–∫–∏
- TailwindCSS - –°—Ç–∏–ª–∏

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- PostgreSQL - –û—Å–Ω–æ–≤–Ω–∞—è –ë–î (–º–∏–≥—Ä–∞—Ü–∏—è —Å SQLite)
- Redis - –ö—ç—à + real-time –¥–∞–Ω–Ω—ã–µ
- S3/MinIO - –§–∞–π–ª—ã

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–∂–µ –æ–±–ª–∞–¥–∞–µ—Ç –º–æ—â–Ω—ã–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º:
- AI –∞–Ω–∞–ª–∏–∑ –∑–≤–æ–Ω–∫–æ–≤
- –ö–æ—É—á–∏–Ω–≥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AmoCRM
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–µ–ª—è—Ç—Å—è –Ω–∞ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –ø–æ–∑–≤–æ–ª—è—Ç:
1. **–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é** –Ω–∞ 15-30%
2. **–ü–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** —Ä–∞–±–æ—Ç—ã –Ω–∞ 100%
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å** —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å** AI –ø—Ä—è–º–æ –≤ AmoCRM
5. **–£–ª—É—á—à–∏—Ç—å –Ω–∞–≤—ã–∫–∏** –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
6. **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å** –≤—ã—Ä—É—á–∫—É —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. –ù–∞—á–∞—Ç—å —Å "–±—ã—Å—Ç—Ä—ã—Ö –ø–æ–±–µ–¥" (–∑–∞–º–µ—Ç–∫–∏, –∑–∞–¥–∞—á–∏, –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
2. –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
3. –î–æ–±–∞–≤–∏—Ç—å ML –ø—Ä–µ–¥–∏–∫—Ç–æ—Ä –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
4. –°–æ–∑–¥–∞—Ç—å AmoCRM –≤–∏–¥–∂–µ—Ç
5. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å dashboard –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è

–í—Å–µ —ç—Ç–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é AI-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∞–º–∏.
