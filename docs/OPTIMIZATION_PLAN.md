# –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ OpenAI API

## –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø
- –†–∞—Å—Ö–æ–¥—ã: $6.86 –∑–∞ —Ç–µ—Å—Ç—ã
- –ü—Ä–∏—á–∏–Ω–∞: –ê–Ω–∞–ª–∏–∑ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–æ–≤ + –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ—Ç—Ä–∞–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–¢–æ—á–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ —Ü–µ–Ω—ã"

## –≠–¢–ê–ü 1: –§–ò–õ–¨–¢–†–ê–¶–ò–Ø (–†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ)
**–≠–∫–æ–Ω–æ–º–∏—è: 60-70% —Ä–∞—Å—Ö–æ–¥–æ–≤**

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º
if len(transcript) < 100:
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ—Ä–æ—Ç–∫–∏–µ
if "–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" in transcript.lower():
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–∏
```

## –≠–¢–ê–ü 2: –ö–≠–®–ò–†–û–í–ê–ù–ò–ï –í –ë–î (–ü–†–ò–û–†–ò–¢–ï–¢ 1)
**–≠–∫–æ–Ω–æ–º–∏—è: 100% –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º
cached = await AnalysisCache.get(call_id, prompt_version="v2")
if cached:
    return cached.analysis_result

# –ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º
await AnalysisCache.create(
    call_id=call_id,
    prompt_version="v2",
    analysis_result=result,
    model_used="gpt-5-pro",
    tokens_used=usage.total_tokens,
    cost_usd=calculate_cost(usage)
)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –¢–µ—Å—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω—ã –ø–æ—Å–ª–µ 1-–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
- –ú–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

## –≠–¢–ê–ü 3: –í–´–ë–û–† –ú–û–î–ï–õ–ò (–ì–ò–ë–ö–û–°–¢–¨)
**–≠–∫–æ–Ω–æ–º–∏—è: 90% –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ GPT-4o**

```python
# –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
ANALYSIS_MODEL = "gpt-4o"  # –∏–ª–∏ "gpt-5-pro"

# –¶–µ–Ω—ã (–∑–∞ 1M tokens):
# GPT-4o:     $2.50 input / $10 output
# GPT-5 Pro: $10-15 input / $30-60 output
# –†–∞–∑–Ω–∏—Ü–∞: 4-6x –¥–µ—à–µ–≤–ª–µ!
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPT-5:**
- –°–ª–æ–∂–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (–º–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–æ–≤)
- –°–ø–æ—Ä–Ω—ã–µ –∫–µ–π—Å—ã
- –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
- –ü–æ –∑–∞–ø—Ä–æ—Å—É –º–µ–Ω–µ–¥–∂–µ—Ä–∞

## –≠–¢–ê–ü 4: –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –†–ê–°–•–û–î–û–í
**–ö–æ–Ω—Ç—Ä–æ–ª—å –±—é–¥–∂–µ—Ç–∞**

```python
# –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
logger.info(
    "API call completed",
    model="gpt-5-pro",
    tokens=usage.total_tokens,
    cost_usd=round(cost, 4),
    call_id=call_id
)

# –î–Ω–µ–≤–Ω–æ–π –æ—Ç—á–µ—Ç
daily_cost = sum(all_costs)
if daily_cost > DAILY_LIMIT:
    alert("Budget exceeded: ${daily_cost}")
```

## –≠–¢–ê–ü 5: –£–ú–ù–´–ô –†–û–£–¢–ï–† (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
**–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ**

```python
async def smart_analyze(dialogue):
    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º GPT-4o
    result = await analyze(dialogue, model="gpt-4o")

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ
    quality_score = validate_analysis(result)

    if quality_score < 0.7:
        # Fallback –Ω–∞ GPT-5
        result = await analyze(dialogue, model="gpt-5-pro")

    return result
```

## ‚ùå –ß–¢–û –ù–ï –î–ï–õ–ê–¢–¨ (–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ChatGPT):

1. **–ù–ï —Å–∂–∏–º–∞—Ç—å –¥–∏–∞–ª–æ–≥–∏** - –ø–æ—Ç–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
2. **–ù–ï –¥–µ–ª–∞—Ç—å –¥–≤–∞ –ø—Ä–æ—Ö–æ–¥–∞** - —É–¥–≤–æ–∏—Ç –∑–∞–¥–µ—Ä–∂–∫—É
3. **–ù–ï —É—Ä–µ–∑–∞—Ç—å –ø—Ä–æ–º–ø—Ç** - –∫–∞—á–µ—Å—Ç–≤–æ –≤–∞–∂–Ω–µ–µ —Ü–µ–Ω—ã

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´:

### –°–ï–ô–ß–ê–° (—Å–ª–µ–¥—É—é—â–∏–µ 30 –º–∏–Ω—É—Ç):
1. ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–æ–≤ (DONE)
2. ‚è≥ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å–¥–µ–ª–∫–µ
3. ‚è≥ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î

### –ü–û–¢–û–ú (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç production):
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤
5. –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
6. –î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
7. –£–º–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

## üí∞ –ü–†–û–ì–ù–û–ó –†–ê–°–•–û–î–û–í:

### –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- 100 –∑–≤–æ–Ω–∫–æ–≤/–¥–µ–Ω—å √ó $1.00 = **$100/–¥–µ–Ω—å** = $3000/–º–µ—Å—è—Ü

### –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (–≠–¢–ê–ü 1):
- 40 —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ √ó $1.00 = **$40/–¥–µ–Ω—å** = $1200/–º–µ—Å—è—Ü

### –° –∫—ç—à–µ–º + GPT-4o (–≠–¢–ê–ü 2-3):
- 40 –∑–≤–æ–Ω–∫–æ–≤ √ó $0.10 (gpt-4o) = **$4/–¥–µ–Ω—å** = $120/–º–µ—Å—è—Ü

### –ò—Ç–æ–≥–æ —ç–∫–æ–Ω–æ–º–∏—è: **96%** ($3000 ‚Üí $120)

## üöÄ –í–´–í–û–î:

ChatGPT –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ø–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ.

–ú–û–ô –ü–õ–ê–ù –ø—Ä–æ—â–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ:
1. –§–∏–ª—å—Ç—Ä—É–µ–º –º—É—Å–æ—Ä (‚úÖ done)
2. –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (TODO)
3. –í—ã–±–∏—Ä–∞–µ–º –º–æ–¥–µ–ª—å (TODO)
4. –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º –±—é–¥–∂–µ—Ç (TODO)

**NEXT STEP: –î–µ–º–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å–¥–µ–ª–∫–µ, –ø–æ—Ç–æ–º —Ä–µ—à–∏–º –ø—Ä–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.**
